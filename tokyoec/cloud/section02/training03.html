<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>PHPのインストール</title>

    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/custom.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <header class="header_area">
      <h1>東京電子専門学校 仮想化/クラウドコンピューティング クラウド実習</h1>
    </header>

    <hr>

    <div class="contents_area">
      <h2>3.MariaDBのインストール</h2>

      <h3>MariaDBのインストール</h3>

      <h4 class="h4_title">1.MariaDBのインストール</h4>


      <ol>
        <li>mariadbのインストール<br>yum install -y mariadb mariadb-server</li>
        <li>mariadbの自動起動設定<br>systemctl enable mariadb<br>systemctl list-unit-files --type=service | grep mariadb</li>
        <li>MariaDBの設定<br>cp -p /etc/my.cnf /etc/my.cnf.org<br>vi /etc/my.cnf<br>
------------------------------------------------------------------<br>
<pre>[mysqld]<br>
datadir=/var/lib/mysql<br>
socket=/var/lib/mysql/mysql.sock<br>
# Disabling symbolic-links is recommended to prevent assorted security risks<br>
symbolic-links=0<br>
# Settings user and group are ignored when systemd is used.<br>
# If you need to run mysqld under a different user or group,<br>
# customize your systemd unit file for mariadb according to the<br>
# instructions in http://fedoraproject.org/wiki/Systemd<br>
<span class="text_color_red">character-set-server=utf8　←この内容を追加</span><br><br>

[mysqld_safe]<br>
log-error=/var/log/mariadb/mariadb.log<br>
pid-file=/var/run/mariadb/mariadb.pid<br><br>

#<br>
# include all files from the config directory<br>
#<br>
!includedir /etc/my.cnf.d</pre>
------------------------------------------------------------------<br>
Esc + :wq</li>
        <li>mariadbの起動<br>systemctl start mariadb<br>systemctl status mariadb</li>
        <li>MariaDBの初期設定<br>mysql_secure_installation<br><br>

          NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB<br>
                SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!<br><br>
          
          In order to log into MariaDB to secure it, we'll need the current<br>
          password for the root user.  If you've just installed MariaDB, and<br>
          you haven't set the root password yet, the password will be blank,<br>
          so you should just press enter here.<br><br>
          
          Enter current password for root (enter for none):<span class="text_color_red">Enterキー</span><br>
          OK, successfully used password, moving on...<br><br>
          
          Setting the root password ensures that nobody can log into the MariaDB<br>
          root user without the proper authorisation.<br><br>
          
          Set root password? [Y/n] <span class="text_color_red">Y</span><br>
          New password:<span class="text_color_red">mariadb123</span><br>
          Re-enter new password:<span class="text_color_red">mariadb123</span><br>
          Password updated successfully!<br>
          Reloading privilege tables..<br>
           ... Success!<br><br>
          
          
          By default, a MariaDB installation has an anonymous user, allowing anyone<br>
          to log into MariaDB without having to have a user account created for<br>
          them.  This is intended only for testing, and to make the installation<br>
          go a bit smoother.  You should remove them before moving into a<br>
          production environment.<br><br>
          
          Remove anonymous users? [Y/n] <span class="text_color_red">Y</span><br>
           ... Success!<br><br>
          
          Normally, root should only be allowed to connect from 'localhost'.  This<br>
          ensures that someone cannot guess at the root password from the network.<br><br>
          
          Disallow root login remotely? [Y/n] <span class="text_color_red">Y</span><br><br>
          
          By default, MariaDB comes with a database named 'test' that anyone can<br>
          access.  This is also intended only for testing, and should be removed<br>
          before moving into a production environment.<br><br>
          
          Remove test database and access to it? [Y/n] <span class="text_color_red">Y</span><br>
           - Dropping test database...<br>
           ... Success!<br>
           - Removing privileges on test database...<br>
           ... Success!<br><br>
          
          Reloading the privilege tables will ensure that all changes made so far<br>
          will take effect immediately.<br><br>
          
          Reload privilege tables now? [Y/n] <span class="text_color_red">Y</span><br>
           ... Success!<br>
          
          Cleaning up...<br><br>
          
          All done!  If you've completed all of the above steps, your MariaDB<br>
          installation should now be secure.<br><br>
          
          Thanks for using MariaDB!
        </li>
        <li>EC-CUBE用のデータベース作成<br>mysql -u root -p<br>
          Enter password:<span class="text_color_red">mariadb123</span><br>
          Welcome to the MariaDB monitor.  Commands end with ; or \g.<br>
          Your MariaDB connection id is 10<br>
          Server version: 5.5.56-MariaDB MariaDB Server<br><br>
          
          Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.<br><br>
          
          Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.<br><br>
          
          MariaDB [(none)]> <span class="text_color_red">create database eccube;</span><br>
          Query OK, 1 row affected (0.00 sec)<br><br>
          
          MariaDB [(none)]> <span class="text_color_red">grant all privileges on eccube.* to ecuser@localhost IDENTIFIED BY 'eccubepass';</span><br>
          Query OK, 0 rows affected (0.00 sec)<br><br>
          
          MariaDB [(none)]> <span class="text_color_red">exit</span><br>
          Bye
          </li>
          <li>EC-CUBE用のデータベースユーザでeccubeデータベース確認<br>
            mysql -u ecuser -p<br>
            Enter password:<span class="text_color_red">eccubepass</span><br>
            Welcome to the MariaDB monitor.  Commands end with ; or \g.<br>
            Your MariaDB connection id is 10<br>
            Server version: 5.5.56-MariaDB MariaDB Server<br><br>
            
            Copyright (c) 2000, 2017, Oracle, MariaDB Corporation Ab and others.<br><br>
            
            Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.<br><br>
            
            MariaDB [(none)]> <span class="text_color_red">show databases;</span><br>
            +--------------------+<br>
            | Database           |<br>
            +--------------------+<br>
            | information_schema |<br>
            | eccube             |<br>
            +--------------------+<br>
            2 rows in set (0.00 sec)<br><br>
            
            MariaDB [(none)]> <span class="text_color_red">exit</span><br>
            Bye
            </li>
      </ol>

      <p class="text_align_center"><a href="../mokuji_eccube.html">目次トップへ戻る</a></p>

      <p class="text_align_center"><a href="../index.html">トップへ戻る</a></p>

    </div>

    <hr>

    <footer class="footer_area">
      <p class="text_align_center">&copy; Yutaka Ichikawa</p>
    </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../js/bootstrap.min.js"></script>
  </body>
</html>
