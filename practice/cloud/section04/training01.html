<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>4.Docker環境構築</title>

  <!-- Bootstrap -->
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/custom.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
  <header id="header">
    <header-title></header-title>
  </header>

  <hr>

  <div class="contents_area">
    <h2>4.Docker環境構築</h2>

    <h3>1.Dockerのインストール</h3>

    <h4 class="h4_title">Dockerインストール</h4>

    <ol>
      <li>インストールスクリプトのダウンロード
        <!-- code -->
        <pre class="pre"><code># curl -fsSL get.docker.com -o get-docker.sh</code></pre>
        <!-- /code/ -->
      </li>
      <li>スクリプトの実行<br>
        <!-- code -->
        <pre class="pre"><code># sh get-docker.sh
# Executing docker install script, commit: 3d8fe77c2c46c5b7571f94b42793905e5b3e42e4
+ sh -c apt-get update -qq >/dev/null
+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl >/dev/null
+ sh -c curl -fsSL "https://download.docker.com/linux/ubuntu/gpg" | apt-key add -qq - >/dev/null
Warning: apt-key output should not be parsed (stdout is not a terminal)
+ sh -c echo "deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable" > /etc/apt/sources.list.d/docker.list
+ sh -c apt-get update -qq >/dev/null
+ [ -n  ]
+ sh -c apt-get install -y -qq --no-install-recommends docker-ce >/dev/null
+ sh -c docker version
Client: Docker Engine - Community
 Version:           20.10.1
 API version:       1.41
 Go version:        go1.13.15
 Git commit:        831ebea
 Built:             Tue Dec 15 04:34:58 2020
 OS/Arch:           linux/amd64
 Context:           default
 Experimental:      true

Server: Docker Engine - Community
 Engine:
  Version:          20.10.1
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.13.15
  Git commit:       f001486
  Built:            Tue Dec 15 04:32:52 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.4.3
  GitCommit:        269548fa27e0089a8b8278fc4fc781d7f65a939b
 runc:
  Version:          1.0.0-rc92
  GitCommit:        ff819c7e9184c13b7c2607fe6c30ae19403a7aff
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0
If you would like to use Docker as a non-root user, you should now consider
adding your user to the "docker" group with something like:

  sudo usermod -aG docker your-user

Remember that you will have to log out and back in for this to take effect!

WARNING: Adding a user to the "docker" group will grant the ability to run
         containers which can be used to obtain root privileges on the
         docker host.
         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface
         for more information.</code></pre>
        <!-- /code/ -->
      </li>
      <li>Dockerのバージョンを確認
        <!-- code -->
        <pre class="pre"><code># docker version
Client: Docker Engine - Community
 Version:           20.10.1
 API version:       1.41
 Go version:        go1.13.15
 Git commit:        831ebea
 Built:             Tue Dec 15 04:34:58 2020
 OS/Arch:           linux/amd64
 Context:           default
 Experimental:      true

Server: Docker Engine - Community
 Engine:
  Version:          20.10.1
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.13.15
  Git commit:       f001486
  Built:            Tue Dec 15 04:32:52 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.4.3
  GitCommit:        269548fa27e0089a8b8278fc4fc781d7f65a939b
 runc:
  Version:          1.0.0-rc92
  GitCommit:        ff819c7e9184c13b7c2607fe6c30ae19403a7aff
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0</code></pre>
        <!-- /code/ -->
      </li>
      <li>システム情報を表示
        <!-- code -->
        <pre class="pre"><code># docker system info
Client:
 Context:    default
 Debug Mode: false
 Plugins:
  app: Docker App (Docker Inc., v0.9.1-beta3)
  buildx: Build with BuildKit (Docker Inc., v0.5.0-docker)

Server:
 Containers: 0
  Running: 0
  Paused: 0
  Stopped: 0
 Images: 0
 Server Version: 20.10.1
 Storage Driver: overlay2
  Backing Filesystem: extfs
  Supports d_type: true
  Native Overlay Diff: true
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Cgroup Version: 1
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: io.containerd.runc.v2 io.containerd.runtime.v1.linux runc
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: 269548fa27e0089a8b8278fc4fc781d7f65a939b
 runc version: ff819c7e9184c13b7c2607fe6c30ae19403a7aff
 init version: de40ad0
 Security Options:
  apparmor
  seccomp
   Profile: default
 Kernel Version: 5.4.0-26-generic
 Operating System: Ubuntu 20.04 LTS
 OSType: linux
 Architecture: x86_64
 CPUs: 2
 Total Memory: 3.844GiB
 Name: docker
 ID: 5BYN:QJD4:HHAS:BJFI:GRGB:DJG3:Z6DZ:FOZV:H7MW:UIR5:KTRE:RC7Q
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Registry: https://index.docker.io/v1/
 Labels:
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Live Restore Enabled: false

WARNING: No swap limit support
WARNING: No blkio weight support
WARNING: No blkio weight_device support</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h3>2.Docker Hubからコンテナーイメージのpull</h3>

    <h4 class="h4_title">Docker Hubからコンテナーイメージのpull</h4>

    <ol>
      <li>searchサブコマンドでレジストリーを検索
        <!-- code -->
        <pre class="pre"><code># docker search linaction
NAME                                      DESCRIPTION               STARS     OFFICIAL   AUTOMATED
linaction/centos                          Sample CentOS6.7(Final)   1
linaction2017/docker-whale                                          0
linaction2205/docker-whale                                          0
linaction/prometheus-handson-web-webapp                             0
linaction2017/python-hello-world                                    0
you19920304/linaction                     wordpress                 0
linaction/wordpress                                                 0
linaction/hello                                                     0
</code></pre>
        <!-- /code/ -->
      </li>
      <li>イメージのダウンロード
        <!-- code -->
        <pre class="pre"><code># docker image pull -a linaction/centos
centos6: Pulling from linaction/centos
Image docker.io/linaction/centos:centos6 uses outdated schema1 manifest format. Please upgrade to a schema2 image for better future compatibility. More information at https://docs.docker.com/registry/spec/deprecated-schema-v1/
a3ed95caeb02: Pull complete
3b231ed5aa2f: Pull complete
cc8adad0f7cd: Pull complete
d00fd8fd4a07: Pull complete
Digest: sha256:759ea478951130a32e9191daaffc9b4e3c5ad089331eccc32112e370bf7c9fb8
Status: Downloaded newer image for linaction/centos
docker.io/linaction/centos
</code></pre>
        <!-- /code/ -->
      </li>
      <li>ダウンロードしたイメージを確認
        <!-- code -->
        <pre class="pre"><code># docker image ls
REPOSITORY         TAG       IMAGE ID       CREATED       SIZE
linaction/centos   centos6   6ccd3be87830   5 years ago   191MB
</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h3>3.コンテナーの起動</h3>

    <h4 class="h4_title">コンテナーを起動</h4>

    <ol>
      <li>コンテナーを起動
        <!-- code -->
        <pre class="pre"><code># docker container run -it --name centos01 linaction/centos:centos6 /bin/bash
[root@47dc6b071c1a /]#</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h3>4.起動したコンテナーの確認</h3>

    <h4 class="h4_title">起動したコンテナーの確認</h4>

    <ol>
      <li>コンテナー環境のOSのバージョンを確認
        <!-- code -->
        <pre class="pre"><code>[root@47dc6b071c1a /]# cat /etc/redhat-release
CentOS release 6.7 (Final)</code></pre>
        <!-- /code/ -->
      </li>
      <li>コンテナー内のプロセスを確認
        <!-- code -->
        <pre class="pre"><code>[root@47dc6b071c1a /]# ps -ef
UID          PID    PPID  C STIME TTY          TIME CMD
root           1       0  1 02:15 pts/0    00:00:00 /bin/bash
root          14       1  0 02:15 pts/0    00:00:00 ps -ef</code></pre>
        <!-- /code/ -->
      </li>
      <li>コンテナー環境のネットワークを確認
        <!-- code -->
        <pre class="pre"><code>[root@47dc6b071c1a /]# ifconfig eth0
eth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:02
          inet addr:172.17.0.2  Bcast:172.17.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:14 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1252 (1.2 KiB)  TX bytes:0 (0.0 b)</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h3>5.コンテナーとLinuxホストの切替</h3>

    <h4 class="h4_title">コンテナーとLinuxホストの切替</h4>

    <ol>
      <li>コンテナーの/bin/bashから抜けてホストLinuxに戻る
        <!-- code -->
        <pre class="pre"><code>Ctrlキーを押したまま、PとQを順番に押す。</code></pre>
        <!-- /code/ -->
      </li>
      <li>ホストLinuxから再度コンテナー内のbashに接続
        <!-- code -->
        <pre class="pre"><code># docker container attach centos01
[root@47dc6b071c1a /]#</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h3>6.コンテナーの起動と停止</h3>

    <h4 class="h4_title">コンテナーの起動と停止</h4>

    <ol>
      <li>Linuxホストに戻る
        <!-- code -->
        <pre class="pre"><code>Ctrlキーを押したまま、PとQを順番に押す。</code></pre>
        <!-- /code/ -->
      </li>
      <li>コンテナーを停止
        <!-- code -->
        <pre class="pre"><code># docker container stop centos01
centos01</code></pre>
        <!-- /code/ -->
      </li>
      <li>停止したコンテナーを確認
        <!-- code -->
        <pre
          class="pre"><code># docker container ls -a
CONTAINER ID   IMAGE                      COMMAND       CREATED         STATUS                       PORTS     NAMES
210127bdcf58   linaction/centos:centos6   "/bin/bash"   5 minutes ago   Exited (137) 5 seconds ago             centos01</code></pre>
        <!-- /code/ -->
      </li>
      <li>コンテナーを起動
        <!-- code -->
        <pre class="pre"><code># docker container start centos01
centos01</code></pre>
        <!-- /code/ -->
      </li>
      <li>起動したコンテナーを確認
        <!-- code -->
        <pre
          class="pre"><code># docker container ls
CONTAINER ID   IMAGE                      COMMAND       CREATED         STATUS          PORTS     NAMES
210127bdcf58   linaction/centos:centos6   "/bin/bash"   6 minutes ago   Up 14 seconds             centos01                           centos01</code></pre>
        <!-- /code/ -->
      </li>
      <li>docker execコマンド
        <!-- code -->
        <pre class="pre"><code># docker container exec -it centos01 /bin/bash
[root@47dc6b071c1a /]#</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code>[root@47dc6b071c1a /]# ps -ef
UID          PID    PPID  C STIME TTY          TIME CMD
root           1       0  0 02:21 pts/0    00:00:00 /bin/bash
root          15       0  2 02:24 pts/1    00:00:00 /bin/bash
root          27      15  0 02:24 pts/1    00:00:00 ps -ef</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code>[root@47dc6b071c1a /]# exit
exit</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h3>7.Dockerコマンド演習</h3>

    <h4 class="h4_title">Nginxコンテナーの作成</h4>

    <ol>
      <li>「practice-nginx」という名前の最新版のnginxイメージ、ポート8080のコンテナを作成
        <!-- code -->
        <pre class="pre"><code># docker run --name practice-nginx -d -p 8080:80 nginx
Unable to find image 'nginx:latest' locally
latest: Pulling from library/nginx
6ec7b7d162b2: Pull complete
cb420a90068e: Pull complete
2766c0bf2b07: Pull complete
e05167b6a99d: Pull complete
70ac9d795e79: Pull complete
Digest: sha256:4cf620a5c81390ee209398ecc18e5fb9dd0f5155cd82adcbae532fec94006fb9
Status: Downloaded newer image for nginx:latest
41f16e99539ce8db450a0d5fe11a510dd8e91b495e838dad95556e59f2764b4b</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーが起動していることを確認
        <!-- code -->
        <pre
          class="pre"><code># docker container ls
          CONTAINER ID   IMAGE                      COMMAND                  CREATED          STATUS          PORTS                  NAMES
          41f16e99539c   nginx                      "/docker-entrypoint.…"   45 seconds ago   Up 44 seconds   0.0.0.0:8080->80/tcp   practice-nginx
          210127bdcf58   linaction/centos:centos6   "/bin/bash"              15 minutes ago   Up 9 minutes                           centos01</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーが8080でポートフォワーディングしているか確認
        <!-- code -->
        <pre class="pre"><code># curl localhost:8080
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーのログを確認
        <!-- code -->
        <pre class="pre"><code># docker container logs practice-nginx
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
172.17.0.1 - - [04/Jan/2021:02:32:30 +0000] "GET / HTTP/1.1" 200 612 "-" "curl/7.68.0" "-"</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーの詳細情報を確認
        <!-- code -->
        <pre class="pre"><code># docker inspect practice-nginx
[
    {
        "Id": "41f16e99539ce8db450a0d5fe11a510dd8e91b495e838dad95556e59f2764b4b",
        "Created": "2021-01-04T02:30:33.046881223Z",
        "Path": "/docker-entrypoint.sh",
        "Args": [
            "nginx",
            "-g",
            "daemon off;"
        ],
        "State": {
            "Status": "running",
            "Running": true,
            "Paused": false,
            "Restarting": false,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 10154,
            "ExitCode": 0,
            "Error": "",
            "StartedAt": "2021-01-04T02:30:34.25223515Z",
            "FinishedAt": "0001-01-01T00:00:00Z"
        },
        "Image": "sha256:ae2feff98a0cc5095d97c6c283dcd33090770c76d63877caa99aefbbe4343bdd",
        "ResolvConfPath": "/var/lib/docker/containers/41f16e99539ce8db450a0d5fe11a510dd8e91b495e838dad95556e59f2764b4b/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/41f16e99539ce8db450a0d5fe11a510dd8e91b495e838dad95556e59f2764b4b/hostname",
        "HostsPath": "/var/lib/docker/containers/41f16e99539ce8db450a0d5fe11a510dd8e91b495e838dad95556e59f2764b4b/hosts",
        "LogPath": "/var/lib/docker/containers/41f16e99539ce8db450a0d5fe11a510dd8e91b495e838dad95556e59f2764b4b/41f16e99539ce8db450a0d5fe11a510dd8e91b495e838dad95556e59f2764b4b-json.log",
        "Name": "/practice-nginx",
        "RestartCount": 0,
        "Driver": "overlay2",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "docker-default",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": null,
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "default",
            "PortBindings": {
                "80/tcp": [
                    {
                        "HostIp": "",
                        "HostPort": "8080"
                    }
                ]
            },
            "RestartPolicy": {
                "Name": "no",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "host",
            "Dns": [],
            "DnsOptions": [],
            "DnsSearch": [],
            "ExtraHosts": null,
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "ConsoleSize": [
                0,
                0
            ],
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": [],
            "BlkioDeviceReadBps": null,
            "BlkioDeviceWriteBps": null,
            "BlkioDeviceReadIOps": null,
            "BlkioDeviceWriteIOps": null,
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": [],
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "KernelMemory": 0,
            "KernelMemoryTCP": 0,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": false,
            "PidsLimit": null,
            "Ulimits": null,
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": {
                "LowerDir": "/var/lib/docker/overlay2/4721e4674cd3f99a97e13eea1cefd6152692e8e75df1a89897eca081c11f067a-init/diff:/var/lib/docker/overlay2/795c32a8e4dde574f3231b58a4820dec8cbd9642a96759fcb9a22331f8dbe14d/diff:/var/lib/docker/overlay2/0d6ffa660832c6c3d4858c859abc69b80fda3b33cd97ac3c72ffc1715d527683/diff:/var/lib/docker/overlay2/743f256d9c5e03a6d299f813d361a126e43a0dccd3f2b7ad939d9f63a4341a21/diff:/var/lib/docker/overlay2/a149d64f366e408b9c47ae4358148b02106dd8498d797dc724e359374b22a984/diff:/var/lib/docker/overlay2/29d19c9563910dd3415a472ca18e679615d2652af9d8bc690cfdf9f3efa35b0e/diff",
                "MergedDir": "/var/lib/docker/overlay2/4721e4674cd3f99a97e13eea1cefd6152692e8e75df1a89897eca081c11f067a/merged",
                "UpperDir": "/var/lib/docker/overlay2/4721e4674cd3f99a97e13eea1cefd6152692e8e75df1a89897eca081c11f067a/diff",
                "WorkDir": "/var/lib/docker/overlay2/4721e4674cd3f99a97e13eea1cefd6152692e8e75df1a89897eca081c11f067a/work"
            },
            "Name": "overlay2"
        },
        "Mounts": [],
        "Config": {
            "Hostname": "41f16e99539c",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "ExposedPorts": {
                "80/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "NGINX_VERSION=1.19.6",
                "NJS_VERSION=0.5.0",
                "PKG_RELEASE=1~buster"
            ],
            "Cmd": [
                "nginx",
                "-g",
                "daemon off;"
            ],
            "Image": "nginx",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": [
                "/docker-entrypoint.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "maintainer": "NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;"
            },
            "StopSignal": "SIGQUIT"
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "37e1b5c3c14d84e16da5eb7d0a827893fa8673d8f63b5f40a794e164f4bcfa0a",
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "Ports": {
                "80/tcp": [
                    {
                        "HostIp": "0.0.0.0",
                        "HostPort": "8080"
                    }
                ]
            },
            "SandboxKey": "/var/run/docker/netns/37e1b5c3c14d",
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "e214cd5b1a0d6d32ceb0b1fd05dba99d165dd35336addce240586b8f5758675f",
            "Gateway": "172.17.0.1",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "172.17.0.3",
            "IPPrefixLen": 16,
            "IPv6Gateway": "",
            "MacAddress": "02:42:ac:11:00:03",
            "Networks": {
                "bridge": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": null,
                    "NetworkID": "7a0f881931228fab1d4f29658cbc09a46a63b27c951c15c5bf6eb3b78257b921",
                    "EndpointID": "e214cd5b1a0d6d32ceb0b1fd05dba99d165dd35336addce240586b8f5758675f",
                    "Gateway": "172.17.0.1",
                    "IPAddress": "172.17.0.3",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "MacAddress": "02:42:ac:11:00:03",
                    "DriverOpts": null
                }
            }
        }
    }
]</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーのリソース情報（ライブストリーム）を確認
        <!-- code -->
        <pre
          class="pre"><code># docker container stats practice-nginx
CONTAINER ID   NAME             CPU %     MEM USAGE / LIMIT     MEM %     NET I/O           BLOCK I/O     PIDS
41f16e99539c   practice-nginx   0.00%     2.707MiB / 3.844GiB   0.07%     1.57kB / 1.27kB   0B / 8.19kB   2</code></pre>
        <!-- /code/ -->「Ctrl + C」で終了します。
      </li>
      <li>「practice-nginx」コンテナーの停止
        <!-- code -->
        <pre class="pre"><code># docker container stop practice-nginx
practice-nginx</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーの削除
        <!-- code -->
        <pre class="pre"><code># docker container rm practice-nginx
practice-nginx</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーの削除確認
        <!-- code -->
        <pre
          class="pre"><code># docker container ls
CONTAINER ID   IMAGE                      COMMAND       CREATED          STATUS          PORTS     NAMES
210127bdcf58   linaction/centos:centos6   "/bin/bash"   22 minutes ago   Up 16 minutes             centos01</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h4 class="h4_title">DockerfleからNginxコンテナの作成</h4>

    <ol>
      <li>「index.html」の作成
        <!-- code -->
        <pre class="pre"><code># vim index.html
------------------------------------------------------------------------------
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Sample HTML&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello,Docker & Kubernetes&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
------------------------------------------------------------------------------
Esc + :wq</code></pre>
        <!-- /code/ -->
      </li>
      <li>「Dockerfile」の作成
        <!-- code -->
        <pre class="pre"><code># vim Dockerfile
------------------------------------------------------------------------------
FROM nginx

ADD index.html /usr/share/nginx/html/index.html
------------------------------------------------------------------------------
Esc + :wq</code></pre>
        <!-- /code/ -->
      </li>
      <li>「dockerfile-nginx」（任意名）イメージのビルド
        <!-- code -->
        <pre class="pre"><code># docker image build -t dockerfile-nginx .
Sending build context to Docker daemon  27.65kB
Step 1/2 : FROM nginx
 ---> ae2feff98a0c
Step 2/2 : ADD index.html /usr/share/nginx/html/index.html
 ---> 7ba8afb33367
Successfully built 7ba8afb33367
Successfully tagged dockerfile-nginx:latest</code></pre>
        <!-- /code/ -->
      </li>
      <li>「dockerfile-nginx」イメージを基に「practice-nginx」という名前、ポート8080コンテナーを起動
        <!-- code -->
        <pre class="pre"><code># docker run --name practice-nginx -d -p 8080:80 dockerfile-nginx
777fdb687c6b89e4be6cee44e72ecba9147f9bbe5342522714e50330974d29d9</code></pre>
        <!-- /code/ -->
      </li>
      <li>8080でアクセスして、オリジナル「index.html」が表示されることを確認
        <!-- code -->
        <pre class="pre"><code># curl localhost:8080
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Sample HTML&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello,Docker & Kubernetes&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーの停止
        <!-- code -->
        <pre class="pre"><code># docker container stop practice-nginx
practice-nginx</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーの削除
        <!-- code -->
        <pre class="pre"><code># docker container rm practice-nginx
practice-nginx</code></pre>
        <!-- /code/ -->
      </li>
      <li>「practice-nginx」コンテナーの削除確認
        <!-- code -->
        <pre
          class="pre"><code># docker container ls
CONTAINER ID   IMAGE                      COMMAND       CREATED          STATUS          PORTS     NAMES
210127bdcf58   linaction/centos:centos6   "/bin/bash"   28 minutes ago   Up 22 minutes             centos01</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h4 class="h4_title">Dockerfile & Container Mount</h4>

    <h5 class="h5_title">Bind mount</h5>

    <ol>
      <li>サンプルHTMLの作成
        <!-- code -->
        <pre class="pre"><code># mkdir htdocs</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre
          class="pre"><code># vim htdocs/index.html
--------------------------------------------------以下の内容をコピー&ペースト-----------------------------------------------------
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Docker Bind mount&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
       &lt;h1&gt;ホストのhtmlファイルをマウントしています！&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
--------------------------------------------------[Esc + :wq]で保存終了します。--------------------------------------------------</code></pre>
        <!-- /code/ -->
      </li>
      <li>Webサーバコンテナの起動（どちらか実行しましょう）
        <p>どちらか実行してください。</p>
        「--mount」オプションの場合はホスト上にパスが存在しない場合、エラーとなります。
        <!-- code -->
        <pre class="pre"><code># docker run --name httpd -d -p 8078:80 --mount type=bind,source=/root/htdocs/,target=/usr/local/apache2/htdocs/ httpd
a4c2f1e19e6731110af0307563c379cf1103614a7ba7f877d7d5c877ba3657a2</code></pre>
        <!-- /code/ -->
        「--v」オプションの場合はホスト上にパスが存在しない場合、新しくディレクトリが作成されます。
        <!-- code -->
        <pre class="pre"><code># docker run --name httpd -d -p 8078:80 -v /root/htdocs/:/usr/local/apache2/htdocs/ httpd
9db9f48f4808c12d3e71f09ff4a00502f2f39ab5249285229bbbd2f2c79797eb</code></pre>
        <!-- /code/ -->
      </li>
      <li>curl確認
        <!-- code -->
        <pre class="pre"><code># curl http://localhost:8078/index.html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Docker Bind mount&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
       &lt;h1&gt;ホストのhtmlファイルをマウントしています！&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
        <!-- /code/ -->
      </li>
      <li>ホストのhtmlファイルの変更
        <!-- code -->
        <pre
          class="pre"><code># vim htdocs/index.html
--------------------------------------------------以下の内容をコピー&ペースト-----------------------------------------------------
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Docker Bind mount&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
       &lt;h1&gt;ホストのhtmlファイルを更新しました！&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
--------------------------------------------------[Esc + :wq]で保存終了します。--------------------------------------------------</code></pre>
        <!-- /code/ -->
      </li>
      <li>curlで更新されたhtmlを確認
        <pre class="pre"><code># curl http://localhost:8078/index.html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Docker Bind mount&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
       &lt;h1&gt;ホストのhtmlファイルを更新しました！&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
        <!-- /code/ -->
      </li>
      <li>httpdコンテナの停止
        <pre class="pre"><code># docker container stop httpd
httpd</code></pre>
        <!-- /code/ -->
      </li>
      <li>httpdコンテナの削除
        <pre class="pre"><code># docker container rm httpd
httpd</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h5 class="h5_title">Volume</h5>

    <ol>
      <li>ボリュームの作成
        <!-- code -->
        <pre class="pre"><code># docker volume create httpd-volume</code></pre>
        <!-- /code/ -->
      </li>
      <li>ボリュームの確認
        <!-- code -->
        <pre class="pre"><code># docker volume ls
local               httpd-volume
</code></pre>
        <!-- /code/ -->
      </li>
      <li>ボリュームの詳細確認
        <!-- code -->
        <pre class="pre"><code># docker volume inspect httpd-volume
[
  {
      "CreatedAt": "2020-12-15T01:28:41-05:00",
      "Driver": "local",
      "Labels": {},
      "Mountpoint": "/var/lib/docker/volumes/httpd-volume/_data",
      "Name": "httpd-volume",
      "Options": {},
      "Scope": "local"
  }
]</code></pre>
        <!-- /code/ -->
      </li>
      <li>Webサーバコンテナの起動（どちらか実行しましょう）
        オプションは、「--mount」と「-v」の両方利用可能です。
        <!-- code -->
        <pre class="pre"><code># docker run --name=httpd -d -p 8078:80 --mount source=httpd-volume,target=/usr/local/apache2/htdocs/ httpd
158d157cb3d36962c30d168d025f1770f64b663e3efbc51586c1eac2bd55c785</code></pre>
        <!-- /code/ -->
        「--v」オプションの場合はホスト上にパスが存在しない場合、新しくディレクトリが作成されます。
        <!-- code -->
        <pre class="pre"><code># docker run --name=httpd -d -p 8078:80 -v httpd-volume:/usr/local/apache2/htdocs/ httpd
51ebd0104267b1f5d6752fdc6bad09192d4a91be95acffce1883dcfdb4cb0d6d</code></pre>
        <!-- /code/ -->
      </li>
      <li>index.htmlを更新
        <p>デフォルトは「It works!」と表示されるHTMLです。上書きで以下の内容に編集。</p>
        <!-- code -->
        <pre
          class="pre"><code># vim /var/lib/docker/volumes/httpd-volume/_data/index.html
--------------------------------------------------以下の内容をコピー&ペースト-----------------------------------------------------
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Docker Volume&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
       &lt;h1&gt;Volumeのhtmlファイルを更新しました！&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
--------------------------------------------------[Esc + :wq]で保存終了します。--------------------------------------------------</code></pre>
        <!-- /code/ -->
      </li>
      <li>curlで更新されたhtmlを確認
        <pre class="pre"><code># curl http://localhost:8078/index.html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Docker Volume&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
       &lt;h1&gt;Volumeのhtmlファイルを更新しました！&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
        <!-- /code/ -->
      </li>
      <li>httpdコンテナの停止
        <pre class="pre"><code># docker container stop httpd
httpd</code></pre>
        <!-- /code/ -->
      </li>
      <li>httpdコンテナの削除
        <pre class="pre"><code># docker container rm httpd
httpd</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h5 class="h5_title">tmpfs mount</h5>

    <ol>
      <li>Webサーバコンテナを起動
        <!-- code -->
        <pre class="pre"><code># docker run -itd --name httpd --mount type=tmpfs,destination=/root/tmp,tmpfs-size=10,tmpfs-mode=755 httpd
87d3af28ba8e52efb36ec4521658d24af1b34efd70f244f362935056c7d770be</code></pre>
        <!-- /code/ -->
      </li>
      <li>「/root/tmp」ディレクトリ作成確認
        <!-- code -->
        <pre class="pre"><code># docker container exec -it httpd /bin/bash
:/usr/local/apache2# ls /root
tmp
:/usr/local/apache2# exit</code></pre>
        <!-- /code/ -->
      </li>
      <li>httpdコンテナの停止
        <!-- code -->
        <pre class="pre"><code># docker container stop httpd
httpd</code></pre>
        <!-- /code/ -->
      </li>
      <li>httpdコンテナの削除
        <!-- code -->
        <pre class="pre"><code># docker container rm httpd
httpd</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h5 class="h5_title">Data Volume Container</h5>

    <ol>
      <li>ホストで作業ディレクトを作成および移動
        <!-- code -->
        <pre class="pre"><code># mkdir /tmp/data-volume</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code># cd /tmp/data-volume</code></pre>
        <!-- /code/ -->
      </li>
      <li>マウントするディレクトリとファイルを作成
        <!-- code -->
        <pre class="pre"><code># mkdir share</code></pre>
        <!-- /code/ -->

        <!-- code -->
        <pre class="pre"><code># touch share/share-file.txt</code></pre>
        <!-- /code/ -->
      </li>
      <li>CentOS7のイメージを利用して「centos7」コンテナを作成
        <p>ホスト: /tmp/data-volume/share<br>コンテナ: /tmp/test</p>
        <!-- code -->
        <pre
          class="pre"><code># docker run -it -d --name centos7 -v /tmp/data-volume/share:/tmp/test centos:centos7</code></pre>
        <!-- /code/ -->
      </li>
      <li>CentOS7のイメージを利用して共有側の「centos7-share」コンテナを作成
        <!-- code -->
        <pre
          class="pre"><code># docker run -it -d --name centos7-share --volumes-from centos7 centos:centos7</code></pre>
        <!-- /code/ -->
      </li>
      <li>「centos7」コンテナに接続して確認
        <!-- code -->
        <pre class="pre"><code># docker exec -it centos7 /bin/bash</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code># ls -l /tmp/test
total 0
-rw-r--r--. 1 root root 0 Dec 15 16:53 share-file.txt
</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code># exit
exit
</code></pre>
        <!-- /code/ -->
      </li>
      <li>「centos7-share」コンテナに接続して確認
        <!-- code -->
        <pre class="pre"><code># docker exec -it centos7-share /bin/bash</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code># ls -l /tmp/test
total 0
-rw-r--r--. 1 root root 0 Dec 15 16:53 share-file.txt
</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code># exit
exit
</code></pre>
        <!-- /code/ -->
      </li>
      <li>「centos7」と「centos7-share」コンテナの停止
        <!-- code -->
        <pre class="pre"><code># docker container stop centos7
centos7
</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code># docker container stop centos7-share
centos7-share
</code></pre>
        <!-- /code/ -->
      </li>
      <li>「centos7」と「centos7-share」コンテナの削除
        <!-- code -->
        <pre class="pre"><code># docker container rm centos7
centos7
</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code># docker container rm centos7-share
centos7-share
</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h4 class="h4_title">WordPress環境作成</h4>

    <ol>
      <li>「wordpress-network」の作成
        <!-- code -->
        <pre class="pre"><code># docker network create wordpress-network
48dd9a7f67fed984e1347b52b1a31478cda492f511bce2bca9f503b9eb850ea5</code></pre>
        <!-- /code/ -->
      </li>
      <li>ネットワーク一覧で確認
        <!-- code -->
        <pre class="pre"><code># docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
e3d270ab1c5d        bridge              bridge              local
c3562b7929e9        host                host                local
a3a80258dbd0        none                null                local
48dd9a7f67fe        wordpress-network   bridge              local</code></pre>
        <!-- /code/ -->
      </li>
      <li>MySQLコンテナーを作成
        <!-- code -->
        <pre class="pre"><code># docker run -d --name mysql --network wordpress-network -e MYSQL_ROOT_PASSWORD=wordpress -e MYSQL_DATABASE=wordpress -e MYSQL_USER=wordpress -e MYSQL_PASSWORD=wordpress mysql:8.0.20
Unable to find image 'mysql:8.0.20' locally
8.0.20: Pulling from library/mysql
8559a31e96f4: Pull complete
d51ce1c2e575: Pull complete
c2344adc4858: Pull complete
fcf3ceff18fc: Pull complete
16da0c38dc5b: Pull complete
b905d1797e97: Pull complete
4b50d1c6b05c: Pull complete
c75914a65ca2: Pull complete
1ae8042bdd09: Pull complete
453ac13c00a3: Pull complete
9e680cd72f08: Pull complete
a6b5dc864b6c: Pull complete
Digest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6
Status: Downloaded newer image for mysql:8.0.20
0360db624057ad66be8bf1b1bfcd9813e22f215230630ddcbc8ea53f67230c52</code></pre>
        <!-- /code/ -->
      </li>
      <li>WordPressコンテナーを作成
        <!-- code -->
        <pre class="pre"><code># docker run -d --name wordpress --network wordpress-network -p 8080:80 -e WORDPRESS_DB_HOST=mysql:3306 -e WORDPRESS_DB_NAME=wordpress -e WORDPRESS_DB_USER=wordpress -e WORDPRESS_DB_PASSWORD=wordpress wordpress:php7.4-apache
Unable to find image 'wordpress:php7.4-apache' locally
php7.4-apache: Pulling from library/wordpress
6ec7b7d162b2: Already exists
db606474d60c: Pull complete
afb30f0cd8e0: Pull complete
3bb2e8051594: Pull complete
4c761b44e2cc: Pull complete
c2199db96575: Pull complete
1b9a9381eea8: Pull complete
50450ffc67ee: Pull complete
4d1e5a768e83: Pull complete
5e8be0d1df16: Pull complete
7a6395859d40: Pull complete
7306499d3dce: Pull complete
fa6f0ba15ac6: Pull complete
308a9ead128f: Pull complete
2db781a8732e: Pull complete
63d3161e9e46: Pull complete
a08dd591ed8a: Pull complete
931a26282f2a: Pull complete
f5c6b405e809: Pull complete
caf2bb847f73: Pull complete
Digest: sha256:dadd8e9c2ef6dc2fe146cbc5f2edc0ed8ae1026ae252b52f25791be4d7d16600
Status: Downloaded newer image for wordpress:php7.4-apache
7fb48dfad2562d69542889fd977bf48c3908781832d28e1e18bd73a53c51e8d6</code></pre>
        <!-- /code/ -->
      </li>
      <li>ブラウザを起動して「http://EXTERNAL-IP:8088」にアクセス</li>
      <li>ホームディレクトリに移動
        <!-- code -->
        <pre class="pre"><code># cd</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h4 class="h4_title">multi-stage builds</h4>

    <ol>
      <li>サンプルGoアプリケーションの作成
        <!-- code -->
        <pre class="pre"><code># vim main.go
-----------------------------------------------------------------------------
package main

import "fmt"

func main() {
        fmt.Println("Hello,Docker & Kubernetes!!")
}
-----------------------------------------------------------------------------
Esc + :wq</code></pre>
        <!-- /code/ -->
      </li>
      <li>「Dockerfile」の作成
        <!-- code -->
        <pre class="pre"><code># vim Dockerfile
-----------------------------------------------------------------------------
#Goのビルドを実行するベースイメージをPull
FROM golang:1.14.1-alpine3.11 as builder
#ローカルのmain.goをイメージ内にコピー
COPY ./main.go ./
#main.goをソースからビルド（コンパイル）して、helloというビルド成果物を生成
RUN go build -o /hello ./main.go

#busyboxベースイメージをPull
FROM busybox
#ビルドコンテナからビルド成果物のmsbをコピーして配置
COPY --from=builder /hello /usr/local/bin/hello
#msbの実行
ENTRYPOINT ["/usr/local/bin/hello"]
-----------------------------------------------------------------------------
Esc + :wq</code></pre>
        <!-- /code/ -->
      </li>
      <li>「hello」という名前でビルド実行
        <!-- code -->
        <pre class="pre"><code># docker image build -t hello ./
Sending build context to Docker daemon  35.33kB
Step 1/6 : FROM golang:1.14.1-alpine3.11 as builder
1.14.1-alpine3.11: Pulling from library/golang
aad63a933944: Pull complete
c732a2540651: Pull complete
7b2225181d6b: Pull complete
c8dae7ec6990: Pull complete
08684ee472f3: Pull complete
Digest: sha256:244a736db4a1d2611d257e7403c729663ce2eb08d4628868f9d9ef2735496659
Status: Downloaded newer image for golang:1.14.1-alpine3.11
 ---> 760fdda71c8f
Step 2/6 : COPY ./main.go ./
 ---> a537bd8ef92c
Step 3/6 : RUN go build -o /hello ./main.go
 ---> Running in 95438f2eefa3
Removing intermediate container 95438f2eefa3
 ---> 5491e7998799
Step 4/6 : FROM busybox
latest: Pulling from library/busybox
d60bca25ef07: Pull complete
Digest: sha256:49dae530fd5fee674a6b0d3da89a380fc93746095e7eca0f1b70188a95fd5d71
Status: Downloaded newer image for busybox:latest
 ---> a77dce18d0ec
Step 5/6 : COPY --from=builder /hello /usr/local/bin/hello
 ---> 1f18803799a8
Step 6/6 : ENTRYPOINT ["/usr/local/bin/hello"]
 ---> Running in 202669e25ca8
Removing intermediate container 202669e25ca8
 ---> 369c15a0a9bb
Successfully built 369c15a0a9bb
Successfully tagged hello:latest</code></pre>
        <!-- /code/ -->
      </li>
      <li>「hello」コンテナーの起動（処理完了と同時にコンテナの削除を実施）
        <!-- code -->
        <pre class="pre"><code># docker container run -it --rm hello
Hello,Docker & Kubernetes!!</code></pre>
        <!-- /code/ -->
      </li>
      <li>イメージの確認
        <!-- code -->
        <pre class="pre"><code># docker image ls
REPOSITORY         TAG                 IMAGE ID       CREATED          SIZE
hello              latest              cdeb3dda2a29   32 seconds ago   3.3MB
&lt;none&gt;              &lt;none&gt;             cd58c8f59987   37 seconds ago   372MB
busybox            latest              a77dce18d0ec   5 days ago       1.24MB
nginx              latest              ae2feff98a0c   2 weeks ago      133MB
wordpress          php7.4-apache       bc5f6567b763   3 weeks ago      550MB
httpd              latest              dd85cdbb9987   3 weeks ago      138MB
centos             centos7             8652b9f0cb4c   7 weeks ago      204MB
mysql              8.0.20              be0dbf01a0f3   6 months ago     541MB
golang             1.14.1-alpine3.11   760fdda71c8f   9 months ago     370MB
linaction/centos   centos6             6ccd3be87830   5 years ago      191MB</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h3>11.Docker HubへコンテナイメージをPush</h3>

    <ol>
      <li>Docker Hubにログイン
        <!-- code -->
        <pre class="pre"><code># docker login
Login with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.
Username: Docker Hub アカウント
Password:
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
</code></pre>
        <!-- /code/ -->
        <!-- code -->helloのイメージIDを確認
        <pre class="pre"><code># docker image ls
REPOSITORY         TAG                 IMAGE ID       CREATED          SIZE
hello              latest              cdeb3dda2a29   11 minutes ago   3.3MB
&lt;none&gt;              &lt;none&gt;             cd58c8f59987   11 minutes ago   372MB
busybox            latest              a77dce18d0ec   5 days ago       1.24MB
nginx              latest              ae2feff98a0c   2 weeks ago      133MB
wordpress          php7.4-apache       bc5f6567b763   3 weeks ago      550MB
httpd              latest              dd85cdbb9987   3 weeks ago      138MB
centos             centos7             8652b9f0cb4c   7 weeks ago      204MB
mysql              8.0.20              be0dbf01a0f3   6 months ago     541MB
golang             1.14.1-alpine3.11   760fdda71c8f   9 months ago     370MB
linaction/centos   centos6             6ccd3be87830   5 years ago      191MB</code></pre>
        <!-- /code/ -->
        <!-- code -->タグを付与します。
        <pre class="pre"><code># docker image tag cdeb3dda2a29 Docker Hubアカウント名/hello:1.0</code></pre>
        <!-- /code/ -->
        <!-- code -->付与されたことを確認。
        <pre class="pre"><code># docker image ls
REPOSITORY         TAG                 IMAGE ID       CREATED          SIZE
hello              latest              cdeb3dda2a29   15 minutes ago   3.3MB
linaction/hello    1.0                 cdeb3dda2a29   15 minutes ago   3.3MB
&lt;none&gt;              &lt;none&gt;              cd58c8f59987   16 minutes ago   372MB
busybox            latest              a77dce18d0ec   5 days ago       1.24MB
nginx              latest              ae2feff98a0c   2 weeks ago      133MB
wordpress          php7.4-apache       bc5f6567b763   3 weeks ago      550MB
httpd              latest              dd85cdbb9987   3 weeks ago      138MB
centos             centos7             8652b9f0cb4c   7 weeks ago      204MB
mysql              8.0.20              be0dbf01a0f3   6 months ago     541MB
golang             1.14.1-alpine3.11   760fdda71c8f   9 months ago     370MB
linaction/centos   centos6             6ccd3be87830   5 years ago      191MB
</code></pre>
        <!-- /code/ -->
      </li>
      <li>Docker HubにPush
        <!-- code -->
        <pre class="pre"><code># docker image push linaction/hello:1.0
The push refers to repository [docker.io/linaction/hello]
eec37ef4c8ad: Pushed
1dad141bdb55: Mounted from library/busybox
1.0: digest: sha256:08a79fade017741b5e55522e39bcd8c3acc4b70fbed989467810b8843a9fba0d size: 738</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <h3>11.コンテナー及びイメージの一括削除</h3>

    <h4 class="h4_title">コンテナー及びイメージの一括削除</h4>

    <ol>
      <li>コンテナの一括停止
        <!-- code -->
        <pre class="pre"><code># docker stop $(docker ps -q)
7fb48dfad256
0360db624057
210127bdcf58
</code></pre>
        <!-- /code/ -->
      </li>
      <li>停止コンテナーの一括削除
        <!-- code -->
        <pre class="pre"><code># docker container prune
WARNING! This will remove all stopped containers.
Are you sure you want to continue? [y/N] y
Deleted Containers:
7fb48dfad2562d69542889fd977bf48c3908781832d28e1e18bd73a53c51e8d6
0360db624057ad66be8bf1b1bfcd9813e22f215230630ddcbc8ea53f67230c52
210127bdcf58bb6059db5f1a65079f94e5fbf58af3c700fdb0a6aa44037cd3dd

Total reclaimed space: 42B</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre
          class="pre"><code># docker container ls -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</code></pre>
        <!-- /code/ -->
      </li>
      <li>イメージの一括削除
        <!-- code -->
        <pre class="pre"><code># docker image prune -a
WARNING! This will remove all images without at least one container associated to them.
Are you sure you want to continue? [y/N] y
Deleted Images:
untagged: linaction/centos:centos6
untagged: linaction/centos@sha256:759ea478951130a32e9191daaffc9b4e3c5ad089331eccc32112e370bf7c9fb8
deleted: sha256:6ccd3be878308d49fb42cd47d9f49f29402705e64affae57a65f99cd04616fa2
deleted: sha256:7f75d454490142c4131d3ca6aedd3a2b19564d96a0fb2ce6547e511edc57b52c
deleted: sha256:b0bd94a388aad1d084e0e311a4c98097fb38f6ffcbb853ecf72e9514b08015d1
deleted: sha256:dad13f415d8417662f6a8c0790109106e05601d65651b7a8b4470fb434a83f97
deleted: sha256:b5471e6ec524d0911384bddc342965d98f164844889e06db5f4976e56e74dbd1
deleted: sha256:e7973ae3b5b17bb7d5a2acb9a90f52751df60e1ccdf2b85ca90b8640650684f9
deleted: sha256:0856b2ee9c1a321ee71f5c19cb07aa0a07e11c28fa8f22d867d02a3c79080e36
deleted: sha256:5f70bf18a086007016e948b04aed3b82103a36bea41755b6cddfaf10ace3c6ef
untagged: hello:latest
untagged: linaction/hello:1.0
untagged: linaction/hello@sha256:08a79fade017741b5e55522e39bcd8c3acc4b70fbed989467810b8843a9fba0d
deleted: sha256:cdeb3dda2a299259022e94aee1a768775724d28022917ecb7ed9065b2fded9fa
deleted: sha256:9f9a1f552d8b4c9fc46b6f3bca3cbff0d084eafabe4956098c19975f319aca88
deleted: sha256:a9f66d402f8a70fc39263c706e055ce3f5cce9409fab47b6f2db802a72a696b8
untagged: wordpress:php7.4-apache
untagged: wordpress@sha256:dadd8e9c2ef6dc2fe146cbc5f2edc0ed8ae1026ae252b52f25791be4d7d16600
deleted: sha256:bc5f6567b76345eb23d6d0c13a9c4540d9cf754ac536d406d9dbc341147c6c77
deleted: sha256:ea1f3f5129c0255d874da803c34b08e20d1f49f33bab59c7568d4a34a9d39e38
deleted: sha256:7ddbcd26cf27d276a144e8cb1b7d5806b50cc8b8ae04f50c1e8fa02690fa978d
deleted: sha256:85088e3ea785500cd92aa857a45bca61a648196597d9f600ca3dd60d0b0ca3d8
deleted: sha256:84c43428155e022e75f4b10829d7059a4ac19207f85b570104603018bf68a9a7
deleted: sha256:8a396e0603d798a58f47422aa29c129384c890afb6284bed782501d49fc176f4
deleted: sha256:46b5707ed38ae46948af18d87e1d563e1abb982637bb8c5fa4c4e18d55bcb2d0
deleted: sha256:8b4452d9a86ee23729ecc28980c06efbb051f372354e51e4aed990577397c33f
deleted: sha256:092caf8621eee90814c9aa724b007c91302d0aae1429906ea1d13a4c798d52b4
deleted: sha256:f7b0b6034c89578c4b57e731f3985e384cc42dd7d7a7e7540bdd6e215d52781a
deleted: sha256:3547ba207c92adc841cd8d6df8076e204fd85bb96a416bece1cb3bddbe436208
deleted: sha256:71ed64c5d6a3b5eb7a5a0d2229bfa0cb93e88f3730bc7867f4ff1fbd64931d84
deleted: sha256:1070af2779f10067bbd758dd5c6fa8efa51f6f96654f85c1153fe1dd5cf54427
deleted: sha256:04f8b0f55683dc7a106acf0f44fdd709bbde535889710c877569a9fd1064d39d
deleted: sha256:2ee746151beb7b0b3ae453bb83c6d0828ee5671a14f60160da05c663f6b4286a
deleted: sha256:cb7a8356ede0b61bd6f540981c5b1d91b7e5385412e36684f65f904bbf590c92
deleted: sha256:698904aae259d168b38dad3c8d8c6787b722e92f4b9dfcee0ee8a2ab8240f4c5
deleted: sha256:a953d04decb53b836e21dfc15a2b8f9bbecaad1085ef606b0d9db21b09078337
deleted: sha256:8a8f49ca28d2e5ca5aa9455c92331b26ae1e31d2c78a6be0e062429cf3812552
deleted: sha256:db10680b18837fbef39e1e6452ff5448803e1e7b0c13eda5d53b19743e09d947
untagged: mysql:8.0.20
untagged: mysql@sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6
deleted: sha256:be0dbf01a0f3f46fc8c88b67696e74e7005c3e16d9071032fa0cd89773771576
deleted: sha256:086d66e8d1cb0d52e9337eabb11fb9b95960e2e1628d90100c62ea5e8bf72306
deleted: sha256:f37c61ee1973b18c285d0d5fcf02da4bcdb1f3920981499d2a20b2858500a110
deleted: sha256:e40b8bca7dc63fc8d188a412328e56caf179022f5e5d5b323aae57d233fb1069
deleted: sha256:339f6b96b27eb035cbedc510adad2560132925a835f0afddbcc1d311c961c14b
deleted: sha256:d38b06cdb26a5c98857ddbc6ef531d3f57b00e325c0c314600b712efc7ff6ab0
deleted: sha256:09687cd9cdf4c704fde969fdba370c2d848bc614689712bef1a31d0d581f2007
deleted: sha256:b704a4a65bf536f82e5d8b86e633d19185e26313de8380162e778feb2852011a
deleted: sha256:c37206160543786228aa0cce738e85343173851faa44bb4dc07dc9b7dc4ff1c1
deleted: sha256:12912c9ec523f648130e663d9d4f0a47c1841a0064d4152bcf7b2a97f96326eb
deleted: sha256:57d29ad88aa49f0f439592755722e70710501b366e2be6125c95accc43464844
deleted: sha256:b17c024283d0302615c6f0c825137da9db607d49a83d2215a79733afbbaeb7c3
deleted: sha256:13cb14c2acd34e45446a50af25cb05095a17624678dbafbcc9e26086547c1d74
untagged: busybox:latest
untagged: busybox@sha256:49dae530fd5fee674a6b0d3da89a380fc93746095e7eca0f1b70188a95fd5d71
deleted: sha256:a77dce18d0ecb0c1f368e336528ab8054567a9055269c07c0169cba15aec0291
deleted: sha256:1dad141bdb55cb5378a5cc3f4e81c10af14b74db9e861e505a3e4f81d99651bf
untagged: centos:centos7
untagged: centos@sha256:0f4ec88e21daf75124b8a9e5ca03c37a5e937e0e108a255d890492430789b60e
deleted: sha256:8652b9f0cb4c0599575e5a003f5906876e10c1ceb2ab9fe1786712dac14a50cf
deleted: sha256:174f5685490326fc0a1c0f5570b8663732189b327007e47ff13d2ca59673db02
untagged: httpd:latest
untagged: httpd@sha256:a3a2886ec250194804974932eaf4a4ba2b77c4e7d551ddb63b01068bf70f4120
deleted: sha256:dd85cdbb99877b73f0de2053f225af590ab188d79469eebdb23ec2d26d0d10e8
deleted: sha256:bc2085990715d2d1ac2179131969b293821dbcf7f0538eaeb3bc3bb6d5645a13
deleted: sha256:a11bf2367d443697ca6267194a18b31289b59b677133e6482779851fa33992df
deleted: sha256:388a801aa9f7953143fc154e7bc16dd5b696d2f3578a054b0b804557a8d89d74
deleted: sha256:37495edb13f558e001fba79f653b38ac3cad5e29f189c1e20501f3f6d5326fdc
untagged: golang:1.14.1-alpine3.11
untagged: golang@sha256:244a736db4a1d2611d257e7403c729663ce2eb08d4628868f9d9ef2735496659
untagged: nginx:latest
untagged: nginx@sha256:4cf620a5c81390ee209398ecc18e5fb9dd0f5155cd82adcbae532fec94006fb9
deleted: sha256:ae2feff98a0cc5095d97c6c283dcd33090770c76d63877caa99aefbbe4343bdd
deleted: sha256:782ae030602867e568a53a99643844e8b06702a851c4b0a09c817deae2520b28
deleted: sha256:8b5b86a154fd4e4098f3f55cd5b71204560cef2e9f50e18e84ada5cb8fb3ae03
deleted: sha256:528e7c6bece2def770f60aa8722648031a17de5e2df10e776acf955ef8ec90d0
deleted: sha256:ffb8d6c7eb6938709ca6d1f39f58971ccc5f10372ec3e37e72c7cbc065bbfb57
deleted: sha256:87c8a1d8f54f3aa4e05569e8919397b65056aa71cdf48b7f061432c98475eee9
deleted: sha256:cd58c8f59987330d26e69a0578e9318f2b3c2a5706a08eaec8d214c3e1f20c01
deleted: sha256:b2d6588708aec7de3364d804408c3d6b46874131c48f6a30162de424b45466de
deleted: sha256:9d173984a11c5b1c735ea168ef23663fc6f0f3c83e2db2ddc9f8df407ad6ebf0
deleted: sha256:e49eeee7f9d70697e7ef857f0d0dbfb34d507012e7ccd440b49015db028f8fea
deleted: sha256:760fdda71c8fffbf9c6cb1a6d4a461fafd72eb507a62dc61f6354bb1c98f7ec2
deleted: sha256:8ba448f3d8b9518ea301d66f09b4c90dc70276c1cdb87ae1b461a61fe0d530d7
deleted: sha256:879731e07ee181cabadd7d2e6c8870fd4ba544fb05949ce108bd4e5793ab8718
deleted: sha256:858a35076f544e782ab6422199fe342ca69f14152cd1461f9fc6f4beda9a76bf
deleted: sha256:393d7bb0808a6378d3ab1074ebc61681e76a3b9414bfe0456afba6da2cb4a743
deleted: sha256:beee9f30bc1f711043e78d4a2be0668955d4b761d587d6f60c2c8dc081efb203

Total reclaimed space: 1.992GB</code></pre>
        <!-- /code/ -->
        <!-- code -->
        <pre class="pre"><code># docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</code></pre>
        <!-- /code/ -->
      </li>
    </ol>

    <p class="text_align_center"><a href="../index.html">トップへ戻る</a></p>

  </div>

  <hr>

  <footer class="footer_area">
    <p class="text_align_center">&copy; cyberblack28</p>
  </footer>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/main.js"></script>
</body>

</html>