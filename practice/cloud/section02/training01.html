<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Web Serverのインストール</title>

    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/custom.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <header id="header">
      <header-title></header-title>
    </header>

    <hr>

    <div class="contents_area">
      <h2>2.EC-CUBE環境構築</h2>

      <h3>Apache Web Serverのインストール</h3>

      <h4 class="h4_title">Apache Web Serverのインストール手順</h4>

      <ol>
        <li>httpdのインストール
<!-- code -->
<pre class="pre"><code># yum -y install httpd
Loaded plugins: fastestmirror
Determining fastest mirrors
epel/x86_64/metalink                                     | 8.4 kB     00:00     
 * epel: ftp.jaist.ac.jp
base                                                     | 3.6 kB     00:00     
epel                                                     | 5.3 kB     00:00     
extras                                                   | 2.9 kB     00:00     
updates                                                  | 2.9 kB     00:00     
(1/7): epel/x86_64/group_gz                                |  90 kB   00:00     
(2/7): epel/x86_64/updateinfo                              | 1.0 MB   00:00     
(3/7): epel/x86_64/primary_db                              | 6.9 MB   00:01     
base/7/x86_64/primary_db       FAILED                                          
http://mirror.centos.org/centos/7/os/x86_64/repodata/04efe80d41ea3d94d36294f7107709d1c8f70db11e152d6ef562da344748581a-primary.sqlite.bz2: [Errno 14] curl#7 - "Failed to connect to 2401:78c0::e00e: Network is unreachable"
Trying other mirror.
(4/7): extras/7/x86_64/primary_db                          | 159 kB   00:01     
(5/7): base/7/x86_64/group_gz                              | 165 kB   00:03     
(6/7): base/7/x86_64/primary_db                            | 6.0 MB   00:02     
(7/7): updates/7/x86_64/primary_db                         | 6.7 MB   00:48     
Resolving Dependencies
--> Running transaction check
---> Package httpd.x86_64 0:2.4.6-90.el7.centos will be installed
--> Processing Dependency: httpd-tools = 2.4.6-90.el7.centos for package: httpd-2.4.6-90.el7.centos.x86_64
--> Processing Dependency: system-logos >= 7.92.1-1 for package: httpd-2.4.6-90.el7.centos.x86_64
--> Processing Dependency: /etc/mime.types for package: httpd-2.4.6-90.el7.centos.x86_64
--> Processing Dependency: libaprutil-1.so.0()(64bit) for package: httpd-2.4.6-90.el7.centos.x86_64
--> Processing Dependency: libapr-1.so.0()(64bit) for package: httpd-2.4.6-90.el7.centos.x86_64
--> Running transaction check
---> Package apr.x86_64 0:1.4.8-5.el7 will be installed
---> Package apr-util.x86_64 0:1.5.2-6.el7 will be installed
---> Package centos-logos.noarch 0:70.0.6-3.el7.centos will be installed
---> Package httpd-tools.x86_64 0:2.4.6-90.el7.centos will be installed
---> Package mailcap.noarch 0:2.1.41-2.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package             Arch          Version                    Repository   Size
================================================================================
Installing:
 httpd               x86_64        2.4.6-90.el7.centos        base        2.7 M
Installing for dependencies:
 apr                 x86_64        1.4.8-5.el7                base        103 k
 apr-util            x86_64        1.5.2-6.el7                base         92 k
 centos-logos        noarch        70.0.6-3.el7.centos        base         21 M
 httpd-tools         x86_64        2.4.6-90.el7.centos        base         91 k
 mailcap             noarch        2.1.41-2.el7               base         31 k

Transaction Summary
================================================================================
Install  1 Package (+5 Dependent packages)

Total download size: 24 M
Installed size: 31 M
Downloading packages:
(1/6): apr-1.4.8-5.el7.x86_64.rpm                          | 103 kB   00:01     
(2/6): apr-util-1.5.2-6.el7.x86_64.rpm                     |  92 kB   00:02     
(3/6): centos-logos-70.0.6-3.el7.centos.noarch.rpm         |  21 MB   00:02     
(4/6): httpd-tools-2.4.6-90.el7.centos.x86_64.rpm          |  91 kB   00:00     
(5/6): mailcap-2.1.41-2.el7.noarch.rpm                     |  31 kB   00:00     
(6/6): httpd-2.4.6-90.el7.centos.x86_64.rpm                | 2.7 MB   00:05     
--------------------------------------------------------------------------------
Total                                              2.9 MB/s |  24 MB  00:08     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : apr-1.4.8-5.el7.x86_64                                       1/6 
  Installing : apr-util-1.5.2-6.el7.x86_64                                  2/6 
  Installing : httpd-tools-2.4.6-90.el7.centos.x86_64                       3/6 
  Installing : centos-logos-70.0.6-3.el7.centos.noarch                      4/6 
  Installing : mailcap-2.1.41-2.el7.noarch                                  5/6 
  Installing : httpd-2.4.6-90.el7.centos.x86_64                             6/6 
  Verifying  : mailcap-2.1.41-2.el7.noarch                                  1/6 
  Verifying  : httpd-tools-2.4.6-90.el7.centos.x86_64                       2/6 
  Verifying  : apr-util-1.5.2-6.el7.x86_64                                  3/6 
  Verifying  : httpd-2.4.6-90.el7.centos.x86_64                             4/6 
  Verifying  : apr-1.4.8-5.el7.x86_64                                       5/6 
  Verifying  : centos-logos-70.0.6-3.el7.centos.noarch                      6/6 

Installed:
  httpd.x86_64 0:2.4.6-90.el7.centos                                            

Dependency Installed:
  apr.x86_64 0:1.4.8-5.el7                                                      
  apr-util.x86_64 0:1.5.2-6.el7                                                 
  centos-logos.noarch 0:70.0.6-3.el7.centos                                     
  httpd-tools.x86_64 0:2.4.6-90.el7.centos                                      
  mailcap.noarch 0:2.1.41-2.el7                                                 

Complete!</code></pre>
<!-- /code/ -->
        </li>
        <li>httpdのバージョン確認
<!-- code -->
<pre class="pre"><code># httpd -v
Server version: Apache/2.4.6 (CentOS)
Server built:   Aug  8 2019 11:41:18
</code></pre>
<!-- /code/ -->
        </li>
        <li>httpdの自動起動設定
<!-- code -->
<pre class="pre"><code># systemctl enable httpd</code></pre>
<!-- /code/ -->
          
<!-- code -->
<pre><code># systemctl list-unit-files --type=service | grep httpd
  httpd.service                                 enabled
</code></pre>
<!-- /code/ -->
        </li>
        <li>httpdの起動
<!-- code -->
<pre class="pre"><code># systemctl start httpd</code></pre>
<!-- /code/ -->
          
<!-- code -->
<pre><code># systemctl status httpd
● httpd.service - The Apache HTTP Server
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)
   Active: active (running) since Thu 2020-02-13 19:26:10 KST; 7s ago
     Docs: man:httpd(8)
           man:apachectl(8)
 Main PID: 11434 (httpd)
   Status: "Processing requests..."
   CGroup: /system.slice/httpd.service
           ├─11434 /usr/sbin/httpd -DFOREGROUND
           ├─11435 /usr/sbin/httpd -DFOREGROUND
           ├─11436 /usr/sbin/httpd -DFOREGROUND
           ├─11437 /usr/sbin/httpd -DFOREGROUND
           ├─11438 /usr/sbin/httpd -DFOREGROUND
           └─11439 /usr/sbin/httpd -DFOREGROUND

Feb 13 19:26:10 eccube.novalocal systemd[1]: Starting The Apache HTTP Server...
Feb 13 19:26:10 eccube.novalocal systemd[1]: Started The Apache HTTP Server.
Hint: Some lines were ellipsized, use -l to show in full.</code></pre>
<!-- /code/ -->
        </li>
        <li>Apacheの設定変更
<!-- code -->
<pre class="pre"><code># cp -p /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.org</code></pre>
<!-- /code/ -->

<!-- code -->
<pre><code># vim /etc/httpd/conf/httpd.conf

-----------------------------以下赤字の内容に設定変更-------------------------------
・
・省略
・
#
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
AllowOverride All <span class="text_color_red">//←「AllowOverride None」変更⇒「AllowOverride All」</span>
・
・省略
・
-----------------------------[Esc + :wq]で保存終了します。-------------------------</code></pre>
<!-- /code/ -->

<!-- code -->
<pre><code># systemctl reload httpd</code></pre>
<!-- /code/ -->
        </li>
      </ol>

      <p class="text_align_center"><a href="../index.html">トップへ戻る</a></p>

    </div>

    <hr>

    <footer id="footer">
      <footer-content></footer-content>
    </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/main.js"></script>
  </body>
</html>
